<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="../Gambar/mlbb.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/Form/AK.CSS">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Arknights</title>
    <style>
        .scrollable {
            max-height: 300px;
            overflow-y: auto;
        }

        #scrollbar2::-webkit-scrollbar {
            width: 12px;
        }

        #scrollbar2::-webkit-scrollbar-track {
            background-color: transparent;
            border: 1.5px solid #7e7e7e;
            border-radius: 8px;
        }

        #scrollbar2::-webkit-scrollbar-thumb {
            background-color: #f1f1f1;
            border: 2px solid #616161;
            border-radius: 8px;
        }

        article,
        aside,
        dialog,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        main,
        nav,
        section {
            display: block;
        }

        header {
            width: 100%;
            height: 80px;
            background: #0b2447;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 100px;
        }
    </style>
</head>

<body>
    <header>
        <div class="logo">
            <img src="../Gambar/Logo Velkhana Store.png" width="120px" />
        </div>
        <div class="velkhana">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <nav class="nav-bar" style="z-index: 1000;">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../aboutus.html">About Us</a></li>
                <li><a href="#" class="active">Product</a></li>
                <li><a href="#contact">Contact Us</a></li>
            </ul>
        </nav>
        <script>
            velkhana = document.querySelector(".velkhana");
            velkhana.onclick = function () {
                navBar = document.querySelector(".nav-bar");
                navBar.classList.toggle("active");
            };
        </script>
    </header>

    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="scrollable scrollbar" id="scrollbar2">
                    <div style="display: flex; align-items: center; gap: 10px">
                        <h4>Arknights</h4>
                        <img src="../Gambar/Arknights_icon.png" alt="mlbanner" width="50px" style="border-radius: 20px" />
                    </div>
                    <h4>Top up Arknights is now even easier with Velkhana Store! You can use it to have a Monthly Card, Monthly Headhunting Pack, and Originium Prime, gacha on your dearest waifu and husbandos. Just enter your UID, choose a nominal value and make a payment.<br><br>

                        Velkhana Store also provides a wide selection of payment methods for Arknights top ups which makes the process of buying Arknights items simpler. You can easily use your E-wallet or credit balance to complete the transaction process. Top up Arknights can also be done without registration, credit card and without having to log in.<br><br>

                        <strong>About Arknights</strong> <br> Released in 2019, Arknights is a free-to-play tactical RPG/tower defense mobile game developed by Chinese developer Hypergryph. The core gameplay is that of a tower defense game, with a number of characters ("operators") as towers. Melee operators can be placed on ground tiles and ranged operators on elevated tiles.
                    </h4>
                </div>
            </div>
            <div class="col-md-4">
                <form id="myForm">
                    <h4>Top Up</h4>
                    <div class="form-group">
                        <input type="text" id="accid" name="accid" class="form-control" placeholder="ID">
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" name="email" class="form-control" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <input type="text" id="phone" name="phone" class="form-control" placeholder="Phone Number">
                    </div>
                    <div class="form-group">
                        <input type="file" id="image" name="image" class="form-control">
                    </div>
                    <div class="form-group">
                        <select name="jumlah" id="diamonds" class="form-control">
                            <option value="5">Monthly Card</option>
                            <option value="11">Monthly Headhunting Pack</option>
                            <option value="17">1 Originium</option>
                            <option value="25">6 Originium</option>
                            <option value="33">20 Originium</option>
                            <option value="154">40 Originium</option>
                            <option value="256">66 Originium</option>
                            <option value="333">130 Originium</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select name="platform" id="platform" class="form-control">
                            <option value="">Select Payment</option>
                            <optgroup label="Token">
                                <option value="Telkomsel">Telkomsel</option>
                                <option value="Indosat">Indosat</option>
                            </optgroup>
                            <optgroup label="E-Wallet">
                                <option value="qris">QRIS</option>
                                <option value="dana">DANA</option>
                                <option value="gopay">GO-PAY</option>
                            </optgroup>
                        </select>
                    </div>
                    <div id="price" style="margin-bottom: 20px;"></div>
                    <div id="payment-phone" style="margin-top: 20px; display: none;"></div>
                    <div><h1></h1></div>
                    <div><h1></h1></div>
                    <div class="form-group">
                        <button type="submit" value="submit" class="btn btn-primary">Submit</button>
                        <button type="reset" value="clear" class="btn btn-secondary">Clear</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!--footer-->
    <div id="contact">
        <footer class="footer">
            <div class="footer-left">
                <h3>Payment Method</h3>
                <div class="online-payment">
                    <img src="../Gambar/dana.png" alt="" />
                    <img src="../Gambar/gopay.png" alt="" />
                    <img src="../Gambar/telkomsel.webp" alt="" />
                    <img src="../Gambar/trii.jpeg" alt="" />
                </div>
                <br />
                <a href="#" class="syarat">Syarat & Ketentuan</a>
                <a href="#" class="kebijakan">Kebijakan Privasi</a>
                <p class="hakcipta">&copy; Hak Cipta Velkhana Payments</p>
                <p class="footer-copyright">2023 Velkhana Store</p>
            </div>

            <div class="footer-center">
                <div>
                    <i class="fa fa-map-marker"></i>
                    <p><span>Indonesia</span> Depok, Jawa Barat</p>
                </div>
                <div>
                    <i class="fa fa-phone"></i>
                    <p>+62 823-3406-4668</p>
                </div>
                <div>
                    <i class="fa fa-envelope"></i>
                    <p><a href="#">velkhanastore@gmail.com</a></p>
                </div>
            </div>

            <div class="footer-right">
                <p class="footer-about">
                    <span>About</span>
                    Velkhana Store melayani jasa pembelian item ingame dengan berbagai metode pembayaran E-wallet serta
                    token prabayar.
                </p>
                <div class="footer-social">
                    <a href="https://www.facebook.com/velkhanastore"><i class="fa fa-facebook"></i></a>
                    <a href="https://www.instagram.com/velkhanastore"><i class="fa fa-instagram"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                    <a href="#"><i class="fa fa-youtube"></i></a>
                </div>
            </div>
        </footer>
    </div>

    <!--firebase-->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
        import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-database.js";
        import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-storage.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBDzegBgVkxUW_Uv7C8PEWIJYLnkhoZQQQ",
            authDomain: "velkhana-store-a982e.firebaseapp.com",
            databaseURL: "https://velkhana-store-a982e-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "velkhana-store-a982e",
            storageBucket: "velkhana-store-a982e.appspot.com",
            messagingSenderId: "54675619484",
            appId: "1:54675619484:web:c46f3d05da8dcba7683759"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const storage = getStorage(app);

        // Reference to the form element
        const form = document.getElementById("myForm");

        // Function to get price based on selected item
        function getPrice(jumlah) {
            const prices = {
                "5": "Rp 75.000",
                "11": "Rp 159.000",
                "17": "Rp 28.000",
                "25": "Rp 120.000",
                "33": "Rp 315.000",
                "154": "Rp 700.000",
                "256": "Rp 1.050.000",
                "333": "Rp 1.700.000"
            };
            return prices[jumlah];
        }

        // Event listener to update price display when item is selected
        document.getElementById("diamonds").addEventListener("change", (e) => {
            const selectedJumlah = e.target.value;
            const price = getPrice(selectedJumlah);
            document.getElementById("price").innerHTML = price ? `<p>Price: ${price}</p>` : "";
        });

        // Event listener to update phone display when platform is selected
        document.getElementById("platform").addEventListener("change", (e) => {
            const selectedPlatform = e.target.value;
            const phoneElement = document.getElementById("payment-phone");
            if (selectedPlatform === "dana" || selectedPlatform === "gopay" || selectedPlatform === "Telkomsel" || selectedPlatform === "Indosat") {
                const phoneNumber = document.getElementById("phone").value;
                phoneElement.innerHTML = `<p>Phone: ${phoneNumber}</p>`;
                phoneElement.style.display = "block";
            } else {
                phoneElement.style.display = "none";
            }
        });

        // Form submission event listener
        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            // Get form values
            const accid = document.getElementById("accid").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const image = document.getElementById("image").files[0];
            const jumlah = document.getElementById("diamonds").value;
            const platform = document.getElementById("platform").value;

            // Validate form values
            if (!accid || !email || !phone || !image || !jumlah || !platform) {
                alert("Please fill in all fields and upload an image.");
                return;
            }

            try {
                // Upload image to Firebase Storage
                const imageRef = storageRef(storage, `Bukti_Pembayaran/${image.name}`);
                const snapshot = await uploadBytes(imageRef, image);
                const imageUrl = await getDownloadURL(snapshot.ref);

                // Store form data in Firebase Realtime Database
                const formDataRef = ref(database, "Payment");
                const newFormDataRef = push(formDataRef);
                await set(newFormDataRef, {
                    accid,
                    email,
                    phone,
                    imageUrl,
                    jumlah,
                    platform
                });

                // Clear the form
                form.reset();

                alert("Form submitted successfully!");
            } catch (error) {
                console.error("Error submitting form: ", error);
                alert("There was an error submitting the form. Please try again.");
            }
        });
    </script>
</body>

</html>
